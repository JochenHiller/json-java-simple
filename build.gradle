plugins {
    id 'java-library'
    id 'eclipse'
	id 'jacoco'
}

tasks.withType(JavaCompile) { 
     options.encoding = 'UTF-8' 
}

repositories {
    jcenter()
}

dependencies {
	// all deps from org.json test project
    testImplementation 'junit:junit:4.12'
    testImplementation 'com.jayway.jsonpath:json-path:2.4.0'
    testImplementation 'org.mockito:mockito-all:1.9.5'
}

test {
  include "org/jochenhiller/json/simple/AllTestSuite.class"
  finalizedBy jacocoTestReport
}

jacocoTestReport{
    getAdditionalSourceDirs().from(files(sourceSets.main.allJava.srcDirs))
    reports {
        xml.enabled false
        csv.enabled false
        html.destination file("${buildDir}/reports/jacoco/html")
    }
    getExecutionData().from(files('build/jacoco/test.exec'))
}

// update gradle wrapper with:
//   ./gradlew wrapper --gradle-version 5.3.1
// check with
//   ./gradlew --version
